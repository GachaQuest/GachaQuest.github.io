System.register(["react-query","jotai"],function(w){"use strict";var Q,g,p,C,h;return{setters:[function(a){Q=a.QueryClient,g=a.QueryObserver,p=a.InfiniteQueryObserver,C=a.isCancelledError},function(a){h=a.atom}],execute:function(){w({atomWithInfiniteQuery:P,atomWithQuery:M});const a=w("queryClientAtom",h(new Q));function M(v,m=c=>c(a)){const c=h(s=>{const n=m(s),e=typeof v=="function"?v(s):v,f=n.defaultQueryOptions(e),u=new g(n,f),l=u.getCurrentResult();let i=null;const o=h(l.data===void 0&&e.enabled!==!1?new Promise(r=>{i=r}):l);let y=()=>{throw new Error("setting result without mount")};const t={isMounted:!1,unsubscribe:null},d=r=>{r.isFetching||!r.isError&&r.data===void 0||(i?(setTimeout(()=>{var b;t.isMounted||((b=t.unsubscribe)==null||b.call(t),t.unsubscribe=null)},1e3),i(r),i=null):y(r))};return e.enabled!==!1&&(t.unsubscribe=u.subscribe(d)),o.onMount=r=>(y=r,t.isMounted=!0,e.enabled!==!1&&!t.unsubscribe&&(t.unsubscribe=u.subscribe(d),d(u.getCurrentResult())),()=>{var b;return(b=t.unsubscribe)==null?void 0:b.call(t)}),{options:e,resultAtom:o,observer:u,state:t}},(s,n,e)=>{var f;const{options:u,resultAtom:l,observer:i,state:o}=s(c);if(u.enabled!==!1)switch(e.type){case"refetch":return n(l,new Promise(()=>{})),o.isMounted||((f=o.unsubscribe)==null||f.call(o),o.unsubscribe=null),i.refetch({cancelRefetch:!0}).then(y=>{n(l,y)})}});return h(s=>{const{resultAtom:n}=s(c),e=s(n);if(e.isError)throw e.error;return e.data},(s,n,e)=>n(c,e))}function P(v,m=c=>c(a)){const c=h(s=>{const n=m(s),e=typeof v=="function"?v(s):v,f=n.defaultQueryOptions(e),u=new p(n,f),l=u.getCurrentResult();let i=null;const o=h(l.data===void 0&&e.enabled!==!1?new Promise(r=>{i=r}):l);let y=()=>{throw new Error("setting result without mount")};const t={isMounted:!1,unsubscribe:null},d=r=>{r.isFetching||!r.isError&&r.data===void 0||r.isError&&C(r.error)||(i?(setTimeout(()=>{var b;t.isMounted||((b=t.unsubscribe)==null||b.call(t),t.unsubscribe=null)},1e3),i(r),i=null):y(r))};return e.enabled!==!1&&(t.unsubscribe=u.subscribe(d)),o.onMount=r=>(y=r,t.isMounted=!0,e.enabled!==!1&&!t.unsubscribe&&(t.unsubscribe=u.subscribe(d),d(u.getCurrentResult())),()=>{var b;return(b=t.unsubscribe)==null?void 0:b.call(t)}),{options:e,resultAtom:o,observer:u,state:t}},(s,n,e)=>{var f;const{options:u,resultAtom:l,observer:i,state:o}=s(c);if(u.enabled!==!1)switch(e.type){case"refetch":{n(l,new Promise(()=>{})),o.isMounted||((f=o.unsubscribe)==null||f.call(o),o.unsubscribe=null);const{type:y,...t}=e;i.refetch(t).then(d=>{n(l,d)});return}case"fetchPreviousPage":{i.fetchPreviousPage();return}case"fetchNextPage":{i.fetchNextPage();return}}});return h(s=>{const{resultAtom:n}=s(c),e=s(n);if(e.isError)throw e.error;return e.data},(s,n,e)=>n(c,e))}}}});
