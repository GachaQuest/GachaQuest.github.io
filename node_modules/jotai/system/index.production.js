System.register(["react"],function(T){"use strict";var $,G,y,H,J,N,K,Q,X;return{setters:[function(S){$=S.createContext,G=S.useState,y=S.useEffect,H=S.useRef,J=S.createElement,N=S.useContext,K=S.useReducer,Q=S.useDebugValue,X=S.useCallback}],execute:function(){T({atom:fe,useAtom:de,useAtomValue:ne,useSetAtom:re});const S=Symbol(),Y=c=>!!c[S],ue=c=>!c[S].c,O=c=>{var u,a;(a=(u=c[S]).c)==null||a.call(u)},k=(c,u)=>{const a=c[S].o,f=u[S].o;return a===f||c===f||Y(a)&&k(a,u)},Z=c=>{const u={o:c,c:null},a=new Promise(f=>{u.c=()=>{u.c=null,f()},c.then(u.c,u.c)});return a[S]=u,a},W=c=>"init"in c,V="r",x="w",z="c",D="s",ae="h",ee=c=>{const u=new WeakMap,a=new WeakMap,f=new Map;if(c)for(const[t,e]of c){const r={v:e,r:0,d:new Map};u.set(t,r)}const d=new WeakMap,p=(t,e,r)=>{let n=d.get(e);n||(n=new Map,d.set(e,n)),r.then(()=>{n.get(t)===r&&(n.delete(t),n.size||d.delete(e))}),n.set(t,r)},g=t=>{const e=new Set,r=d.get(t);return r&&(d.delete(t),r.forEach((n,s)=>{O(n),e.add(s)})),e},w=new WeakMap,P=t=>{let e=w.get(t);return e||(e=new Map,w.set(t,e)),e},v=(t,e)=>{if(t){const r=P(t);let n=r.get(e);return n||(n=v(t.p,e),n&&r.set(e,n)),n}return u.get(e)},m=(t,e,r)=>{if(t)P(t).set(e,r);else{const n=u.get(e);u.set(e,r),f.has(e)||f.set(e,n)}},A=(t,e=new Map,r)=>{if(!r)return e;const n=new Map;let s=!1;return r.forEach(o=>{var i;const l=((i=v(t,o))==null?void 0:i.r)||0;n.set(o,l),e.get(o)!==l&&(s=!0)}),e.size===n.size&&!s?e:n},h=(t,e,r,n,s)=>{const o=v(t,e);if(o){if(s&&(!("p"in o)||!k(o.p,s)))return o;"p"in o&&O(o.p)}const i={v:r,r:(o==null?void 0:o.r)||0,d:A(t,o==null?void 0:o.d,n)};let l=!1;return!o||!("v"in o)||!Object.is(o.v,r)?(l=!0,++i.r,i.d.has(e)&&(i.d=new Map(i.d).set(e,i.r))):("i"in o||i.d!==o.d&&(i.d.size!==o.d.size||!Array.from(i.d.keys()).every(C=>o.d.has(C))))&&(l=!0,Promise.resolve().then(()=>{R(t)})),o&&!l?o:(m(t,e,i),i)},E=(t,e,r,n,s)=>{const o=v(t,e);if(o){if(s&&(!("p"in o)||!k(o.p,s)))return o;"p"in o&&O(o.p)}const i={e:r,r:(o==null?void 0:o.r)||0,d:A(t,o==null?void 0:o.d,n)};return m(t,e,i),i},b=(t,e,r,n)=>{const s=v(t,e);if(s&&"p"in s){if(k(s.p,r))return s;O(s.p)}p(t,e,r);const o={p:r,r:(s==null?void 0:s.r)||0,d:A(t,s==null?void 0:s.d,n)};return m(t,e,o),o},I=(t,e,r,n)=>{if(r instanceof Promise){const s=Z(r.then(o=>{h(t,e,o,n,s)}).catch(o=>{if(o instanceof Promise)return Y(o)?o.then(()=>{_(t,e,!0)}):o;E(t,e,o,n,s)}));return b(t,e,s,n)}return h(t,e,r,n)},pe=(t,e)=>{const r=v(t,e);if(r){const n={...r,i:r.r};m(t,e,n)}},_=(t,e,r)=>{if(!r){const s=v(t,e);if(s&&(s.r!==s.i&&"p"in s&&!ue(s.p)||(s.d.forEach((o,i)=>{if(i!==e)if(!a.has(i))_(t,i);else{const l=v(t,i);l&&l.r===l.i&&_(t,i)}}),Array.from(s.d).every(([o,i])=>{const l=v(t,o);return l&&"v"in l&&l.r===i}))))return s}const n=new Set;try{const s=e.read(o=>{n.add(o);const i=o===e?v(t,o):_(t,o);if(i){if("e"in i)throw i.e;if("p"in i)throw i.p;return i.v}if(W(o))return o.init;throw new Error("no atom init")});return I(t,e,s,n)}catch(s){if(s instanceof Promise){const o=Z(s);return b(t,e,o,n)}return E(t,e,s,n)}},ve=(t,e)=>_(e,t),we=(t,e)=>{let r=a.get(e);return r||(r=F(t,e)),r},q=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),he=(t,e)=>{const r=a.get(e);r&&q(e,r)&&U(t,e)},B=(t,e)=>{const r=a.get(e);r==null||r.t.forEach(n=>{n!==e&&(pe(t,n),B(t,n))})},oe=(t,e,r)=>{let n=!0;const s=(l,C)=>{const M=_(t,l);if("e"in M)throw M.e;if("p"in M){if(C!=null&&C.unstable_promise)return M.p.then(()=>s(l,C));throw M.p}if("v"in M)return M.v;throw new Error("no value found")},o=(l,C)=>{let M;if(l===e){if(!W(l))throw new Error("atom not writable");g(l).forEach(ce=>{ce!==t&&I(ce,l,C)});const Me=v(t,l),Ce=I(t,l,C);Me!==Ce&&B(t,l)}else M=oe(t,l,C);return n||R(t),M},i=e.write(s,o,r);return n=!1,i},se=(t,e,r)=>{const n=oe(r,t,e);return R(r),n},Ee=t=>!!t.write,F=(t,e,r)=>{const n={t:new Set(r&&[r]),l:new Set};if(a.set(e,n),_(void 0,e).d.forEach((s,o)=>{const i=a.get(o);i?i.t.add(e):o!==e&&F(t,o,e)}),Ee(e)&&e.onMount){const s=i=>se(e,i,t),o=e.onMount(s);t=void 0,o&&(n.u=o)}return n},U=(t,e)=>{var r;const n=(r=a.get(e))==null?void 0:r.u;n&&n(),a.delete(e);const s=v(t,e);s&&s.d.forEach((o,i)=>{if(i!==e){const l=a.get(i);l&&(l.t.delete(e),q(i,l)&&U(t,i))}})},ie=(t,e,r,n)=>{const s=new Set(r.d.keys());n==null||n.forEach((o,i)=>{if(s.has(i)){s.delete(i);return}const l=a.get(i);l&&(l.t.delete(e),q(i,l)&&U(t,i))}),s.forEach(o=>{const i=a.get(o);i?i.t.add(e):a.has(e)&&F(t,o,e)})},R=t=>{if(t){P(t).forEach((e,r)=>{const n=u.get(r);if(e!==n){const s=a.get(r);s==null||s.l.forEach(o=>o(t))}});return}for(;f.size;){const e=Array.from(f);f.clear(),e.forEach(([r,n])=>{const s=v(void 0,r);if(s&&s.d!==(n==null?void 0:n.d)&&ie(void 0,r,s,n==null?void 0:n.d),n&&"i"in n&&s&&!("i"in s))return;const o=a.get(r);o==null||o.l.forEach(i=>i())})}},Se=t=>{P(t).forEach((e,r)=>{const n=u.get(r);(!n||e.r>n.r||"v"in e&&e.r===n.r&&e.d!==n.d)&&(u.set(r,e),e.d!==(n==null?void 0:n.d)&&ie(t,r,e,n==null?void 0:n.d))})},ge=(t,e)=>{e&&Se(e),R(void 0)},me=(t,e,r)=>{const n=we(r,t).l;return n.add(e),()=>{n.delete(e),he(r,t)}},Ae=(t,e)=>{for(const[r,n]of t)W(r)&&(I(e,r,n),B(e,r));R(e)};return{[V]:ve,[x]:se,[z]:ge,[D]:me,[ae]:Ae}},Pe=T("unstable_createStore",c=>{const u=ee(c),a=d=>{const p=u[V](d);if("e"in p)throw p.e;if(!("p"in p))return p.v},f=d=>new Promise((p,g)=>{const w=u[V](d);"e"in w?g(w.e):"p"in w?p(w.p.then(()=>f(d))):p(w.v)});return{get:a,asyncGet:f,set:(d,p)=>u[x](d,p),sub:(d,p)=>u[D](d,p),SECRET_INTERNAL_store:u}}),te=(c,u)=>({s:u?u(c).SECRET_INTERNAL_store:ee(c)}),j=new Map,L=T("SECRET_INTERNAL_getScopeContext",c=>(j.has(c)||j.set(c,$(te())),j.get(c))),_e=T("Provider",({children:c,initialValues:u,scope:a,unstable_createStore:f,unstable_enableVersionedWrite:d})=>{const[p,g]=G({});y(()=>{const v=w.current;v.w&&(v.s[z](null,p),delete p.p,v.v=p)},[p]);const w=H();if(!w.current){const v=te(u,f);if(d){let m=0;v.w=A=>{g(h=>{const E=m?h:{p:h};return A(E),E})},v.v=p,v.r=A=>{++m,A(),--m}}w.current=v}const P=L(a);return J(P.Provider,{value:w.current},c)});let le=0;function fe(c,u){const a=`atom${++le}`,f={toString:()=>a};return typeof c=="function"?f.read=c:(f.init=c,f.read=d=>d(f),f.write=(d,p,g)=>p(f,typeof g=="function"?g(d(f)):g)),u&&(f.write=u),f}function ne(c,u){const a=L(u),f=N(a),{s:d,v:p}=f,g=h=>{const E=d[V](c,h);if("e"in E)throw E.e;if("p"in E)throw E.p;if("v"in E)return E.v;throw new Error("no atom value")},[[w,P,v],m]=K((h,E)=>{const b=g(E);return Object.is(h[1],b)&&h[2]===c?h:[E,b,c]},p,h=>{const E=g(h);return[h,E,c]});let A=P;return v!==c&&(m(w),A=g(w)),y(()=>{const{v:h}=f;h&&d[z](c,h);const E=d[D](c,m,h);return m(h),E},[d,c,f]),y(()=>{d[z](c,w)}),Q(A),A}function re(c,u){const a=L(u),{s:f,w:d}=N(a);return X(p=>{const g=w=>f[x](c,p,w);return d?d(g):g()},[f,d,c])}function de(c,u){return"scope"in c&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),u=c.scope),[ne(c,u),re(c,u)]}}}});
